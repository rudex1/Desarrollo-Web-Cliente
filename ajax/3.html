<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        
        <title>Ejercicios AJAX</title>
        <style type="text/css">
            .wrapper {
                margin: 0 auto;
                width: 960px;
            }
            .peliculas {
                width: 100%;
            }
            .pelicula {
                width: 300px;
                float: left;
                margin-bottom: 50px;
                margin-left: 10px;
                padding: 5px;
                border: 1px solid #ccc;
                max-height: 560px;
            }
            .cartel {
                max-width: 300px;
                max-height: 300px;
            }
            .sinopsis {
                font-size: 12px;
                display: none;
            }
        </style>
    </head>
    <body>
        
        <div class="wrapper">
            <h1>Listado de pel√≠culas</h1>
            <div id="peliculas">
                
            </div>
        </div>
        
        <script type="text/javascript">
        
                function cargarDocumento()
                {
                    var xhttp = new XMLHttpRequest();
                    
                    xhttp.onreadystatechange = function(){
                        if(this.readyState == 4){
                            if(this.status == 200){
                                var resXml = this.responseXML;
                                
                                var peliculas = document.getElementById("peliculas");
                                var titulo = resXml.getElementsByTagName("Titulo");
                                var director = resXml.getElementsByTagName("Director");
                                var cartel = resXml.getElementsByTagName("Cartel");
                                var sinopsis = resXml.getElementsByTagName("Sinopsis");
                                
                                for (var i = 0; i < titulo.length; i++) {
                                    peliculas.innerHTML += "<div id='pelicula-"+ i + "' class='pelicula'>" + 
                                    "<a href='#' id='"+i+"'><img src='" + cartel[i].childNodes[0].nodeValue + "' class='cartel' /></a>" +
                                    "<h2 class='titulo'>" + titulo[i].childNodes[0].nodeValue + "</h2>" +
                                    "<h4 class='director'>" + director[i].childNodes[0].nodeValue + "</h4>" + 
                                    "<div class='sinopsis'><p>" + sinopsis[i].childNodes[0].nodeValue + "</p></div>";
                                }
                                entzun();
                            }
                        }
                    }
                    
                    xhttp.open('GET', 'peliculas.xml', true);
                    xhttp.send();
                }
                
                cargarDocumento();
                
                var numPeliculas = document.getElementsByClassName('pelicula');
                
                function entzun(){
                    for (var i=0;i<numPeliculas.length;i++){
                        document.getElementById(i).addEventListener('click', mostrarSinopsis);
                    }
                }
                
                function mostrarSinopsis()
                {
                    this.getElementsByClassName('sinopsis').style.display = "block";
                    console.log("clicked");
                }
                
        </script>
    </body>
</html>