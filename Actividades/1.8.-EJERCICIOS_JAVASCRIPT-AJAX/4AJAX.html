<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        
        <title>Ejercicios AJAX</title>
        <link rel="stylesheet" href="css/myStyle.css" type="text/css" />
    </head>
    <body>
        <center>
            <div class="titulo">
                <h1>Selecciona una película</h1>
                <form>
                    <select id="director">
                        <option value="">Selecciona un director</option>
                    </select>
                    <select id="pelicula"></select>
                    <input type="submit" value="Mostrar"/>
                </form>
                
                <div id="pelicula"></div>
            </div>
        </center>
        
        <script type="text/javascript">
        
                function cargarDocumento(){
                    var xhttp = new XMLHttpRequest();
                    
                    xhttp.onreadystatechange = function(){
                        if(this.readyState == 4){
                            if(this.status == 200){
                                var resXml = this.responseXML;
                                
                                var selDirector = document.getElementById("director");
                                var selPelicula = document.getElementById("pelicula");
                                var selReparto = document.getElementById("Sinopsis");
                                
                                var numPeliculas = resXml.getElementsByTagName("Pelicula");
                                var valTitulo = resXml.getElementsByTagName("Titulo");
                                var valDirector = resXml.getElementsByTagName("Director");
                                var valReparto = resXml.getElementsByTagName("Sinopsis");
                                
                                for (var a = 0; a < numPeliculas.length; a++) {
                                    
                                    var opcionDirector = document.createElement("option");
                                    opcionDirector.value = valDirector[a].childNodes[0].nodeValue;
                                    opcionDirector.innerHTML = valDirector[a].childNodes[0].nodeValue;
                                    
                                    selDirector.appendChild(opcionDirector);
                                    
                                    if(selDirector.value != ""){
                                        var opcionTitulo = document.createElement("option");
                                        opcionTitulo.value = valTitulo[a].childNodes[0].nodeValue;
                                        opcionTitulo.innerHTML = valTitulo[a].childNodes[0].nodeValue;
                                        
                                        selPelicula.appendChild(opcionTitulo);
                                    } else {
                                        selPelicula.innerHTML = "Aquí aparecerán las películas";
                                    }
                                }
                            }
                        }
                    }
                    
                    xhttp.open('GET', 'peliculas.xml', true);
                    xhttp.send();
                }
                
                cargarDocumento();
                
        </script>
    </body>
</html>