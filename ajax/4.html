<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        
        <title>Ejercicios AJAX</title>
        <style type="text/css">
            .wrapper {
                margin: 0 auto;
                width: 960px;
            }
            .peliculas {
                width: 100%;
            }
            .pelicula {
                width: 300px;
                float: left;
                margin-bottom: 50px;
                margin-left: 10px;
                padding: 5px;
                border: 1px solid #ccc;
                max-height: 560px;
            }
            .cartel {
                max-width: 300px;
                max-height: 300px;
            }
            .sinopsis {
                font-size: 12px;
                display: none;
            }
        </style>
    </head>
    <body>
        
        <div class="wrapper">
            <h1>Selecciona una película</h1>
            <form>
                <select id="director">
                    <option value="">Selecciona un director</option>
                </select>
                <select id="pelicula"></select>
                <input type="submit" value="Mostrar"/>
            </form>
            
            <div id="sinopsis"></div>
        </div>
        
        <script type="text/javascript">
        
                function cargarDocumento()
                {
                    var xhttp = new XMLHttpRequest();
                    
                    xhttp.onreadystatechange = function(){
                        if(this.readyState == 4){
                            if(this.status == 200){
                                var resXml = this.responseXML;
                                
                                var selDirector = document.getElementById("director");
                                var selPelicula = document.getElementById("pelicula");
                                var selSinopsis = document.getElementById("sinopsis");
                                
                                var numPeliculas = resXml.getElementsByTagName("Pelicula");
                                var valTitulo = resXml.getElementsByTagName("Titulo");
                                var valDirector = resXml.getElementsByTagName("Director");
                                var valSinopsis = resXml.getElementsByTagName("Sinopsis");
                                
                                for (var i = 0; i < numPeliculas.length; i++) {
                                    
                                    var opcionDirector = document.createElement("option");
                                    opcionDirector.value = valDirector[i].childNodes[0].nodeValue;
                                    opcionDirector.innerHTML = valDirector[i].childNodes[0].nodeValue;
                                    
                                    selDirector.appendChild(opcionDirector);
                                    
                                    if(selDirector.value != ""){
                                        var opcionTitulo = document.createElement("option");
                                        opcionTitulo.value = valTitulo[i].childNodes[0].nodeValue;
                                        opcionTitulo.innerHTML = valTitulo[i].childNodes[0].nodeValue;
                                        
                                        selPelicula.appendChild(opcionTitulo);
                                    } else {
                                        selPelicula.innerHTML = "Aquí aparecerán las películas";
                                    }
                                }
                            }
                        }
                    }
                    
                    xhttp.open('GET', 'peliculas.xml', true);
                    xhttp.send();
                }
                
                cargarDocumento();
                
        </script>
    </body>
</html>